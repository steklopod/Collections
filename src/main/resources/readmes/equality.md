## Эквивалентность (Equality)

Библиотеки коллекций имеют единый подход к равенству и хешированию. Идея состоит в том, чтобы, во-первых, разделить 
коллекции на множества, отображения и последовательности. Коллекции в разных категориях всегда неравны. 
Например, `Set(1, 2, 3)` не соответствует `Lisy(1, 2, 3)`, хотя они содержат одни и те же элементы. С другой стороны, в
 той же категории коллекции равны тогда и только тогда, когда они имеют одинаковые элементы (для последовательностей: 
 одни и те же элементы в одном порядке). Например, `List(1, 2, 3) == Vector(1, 2, 3)` и `HashSet(1, 2) == TreeSet(2, 1)`.

Для равенства не имеет значения, является ли коллекция изменяемой или неизменяемой. Для изменяемой коллекции просто 
анализируются ее текущие элементы во время выполнения теста на равенство. Это означает, что изменяемая коллекция может 
быть одинаковой для разных коллекций в разное время, в зависимости от того, какие элементы добавляются или удаляются. Это 
потенциальная ловушка при использовании изменчивой коллекции в качестве ключа в хэш-отображении. 

```scala
    scala> import collection.mutable.{HashMap, ArrayBuffer}
    
    scala> val buf = ArrayBuffer(1, 2, 3)
    buf: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 2, 3)
    
    scala> val map = HashMap(buf -> 3)
    map: scala.collection.mutable.HashMap[scala.collection.
    mutable.ArrayBuffer[Int],Int] = Map((ArrayBuffer(1, 2, 3),3))
    
    scala> map(buf)
    res13: Int = 3
    
    scala> buf(0) += 1
    scala> map(buf)
    java.util.NoSuchElementException: key not found:
    ArrayBuffer(2, 2, 3)
```

В этом примере выбор в последней строке, скорее всего, завершится неудачно, потому что хеш-код массива `xs` изменился 
в предпоследней строке. Поэтому поиск на основе хэш-кода будет выглядеть в другом месте, чем тот, где хранится xs.


_Если этот проект окажется полезным тебе - нажми на кнопочку **`★`** в правом верхнем углу._

[<= содержание](https://github.com/steklopod/Collections/blob/master/readme.md)